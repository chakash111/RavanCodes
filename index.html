<!DOCTYPE html>
<html>
<head>
  <title>Ravan Code Lab</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>ðŸ’» Ravan Code Lab</h1>

<!-- TOOLBAR -->
<div class="toolbar">
  <button onclick="addCode('<h1>Heading</h1>')">H1</button>
  <button onclick="addCode('<button>Click</button>')">Button</button>
  <button onclick="addCode('<p>Text</p>')">Text</button>
  <button onclick="runCode()">â–¶ Run</button>
  <button onclick="clearCode()">ðŸ—‘</button>
</div>

<!-- SYMBOL BAR -->
<div class="symbol-bar">
  <button onclick="insertSymbol('<')">&lt;</button>
  <button onclick="insertSymbol('>')">&gt;</button>
  <button onclick="insertSymbol('/')">/</button>
  <button onclick="insertSymbol('=')">=</button>
  <button onclick="insertSymbol('\"')">"</button>
  <button onclick="insertSymbol('{')">{</button>
  <button onclick="insertSymbol('}')">}</button>
</div>

<textarea id="codeArea" placeholder="Yaha code likho..."></textarea>

<iframe id="preview"></iframe>

<script>
let codeArea = document.getElementById("codeArea");

/* AUTO SAVE */
codeArea.value = localStorage.getItem("savedCode") || "";
codeArea.addEventListener("input", ()=>{
  localStorage.setItem("savedCode", codeArea.value);
});

/* QUICK CODE */
function addCode(text){
  codeArea.value += "\n" + text;
  localStorage.setItem("savedCode", codeArea.value);
}

/* INSERT SYMBOL AT CURSOR */
function insertSymbol(sym){
  let start = codeArea.selectionStart;
  let end = codeArea.selectionEnd;
  let text = codeArea.value;

  codeArea.value = text.substring(0,start) + sym + text.substring(end);
  codeArea.focus();
  codeArea.selectionStart = codeArea.selectionEnd = start + sym.length;

  localStorage.setItem("savedCode", codeArea.value);
}

/* RUN CODE */
function runCode(){
  let preview = document.getElementById("preview").contentWindow.document;
  preview.open();
  preview.write(codeArea.value);
  preview.close();
}

/* CLEAR */
function clearCode(){
  codeArea.value = "";
  localStorage.removeItem("savedCode");
}

runCode();
</script>

</body>
</html>
